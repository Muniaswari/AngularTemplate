<div [@routerTransition]>
    <app-page-header [heading]="'Master'" [icon]="'fa-list'">
        Master
    </app-page-header>
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-header">{{ 'Users.MapRole' | translate }} for {{user}}
                    <div class="btn-group btn-group-sm pull-right" role="group" aria-label="">
                        <a class="btn btn-secondary" href="Javascript:void(0)" [routerLink]="['/settings/master']">
                            <i class="fa fa-list"></i>
                        </a>
                        <a class="btn btn-secondary" href="Javascript:void(0)" (click)="save();">
                            <i class="fa fa-save"></i>
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Custom Success/Error Message -->
                    <div class="row show-hide-message">
                        <div [ngClass]="messageClass">
                            {{ message }}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-4">
                            <label class="heading">Roles</label>
                            <table class="table table-bordered" *ngIf='rolelist && rolelist.length>0'>
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" id="chkTblRole" (click)="selectAll($event.target.checked)" />
                                        </th>
                                        <th>{{ 'Role.RoleName' | translate }}</th>
                                    </tr>
                                </thead>
                                <tbody #tbodyUsers>
                                    <tr *ngFor="let item of rolelist; ">
                                        <td>
                                            <input type="checkbox" class="chkTblRole" [checked]="IschkTblRole" id="{{item._id}}" value="{{item._id}}" [ngModel]="item.IsRoleAssigned"
                                                (click)="selectHeaderCheck($event.target.checked)" />
                                        </td>
                                        <td> {{item.rolename}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="Category">User Category</label>
                                <select formControlName="Category" id="Category" #Category class="hideLabel form-control"
                                 name="Category" (change)="clearUsers()">
                                    <option selected value="2">Client Users</option>
                                    <option value="1">Admin Users</option>
                                </select>
                            </div>
                            <label class="heading">Select User</label>
                            <input type="text" id="txtFilter" class="form-control" placeholder="Type here for search" 
                            (keyup)="displaydata($event)" />
                            <div id="checkboxes" #checkboxes>
                                <table class="table table-bordered table-hover" *ngIf='list && list.length>0'>
                                    <tr *ngFor="let item of list; ">
                                        <td>
                                            <label class="checkcontainer">{{item.email}}
                                                <input type="checkbox" value="{{item.email}}" (click)="selectedUser($event)" class="chkUsers" #chk{{item._id}} id="{{item._id}}">
                                                <span class="checkmark"></span>
                                            </label>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <label class="heading">Selected Users</label>                            
                            <table class="table table-bordered table-hover" #tblSelectedUsers *ngIf='selectedUserList && selectedUserList.length>0'>
                                <tr *ngFor="let item of selectedUserList;">
                                    <td class="HideRow">{{item._id}}</td>
                                    <td>{{item.email}}
                                        <a (click)="removeUser(item._id)" class="chkTblUsers fa fa-trash pull-right">
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>